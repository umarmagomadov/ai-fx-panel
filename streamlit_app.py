import streamlit as st
import pandas as pd
from datetime import datetime

# ================== ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð¡Ð¢Ð ÐÐÐ˜Ð¦Ð« ==================
st.set_page_config(
    page_title="PO Signal Bot (Edu)",
    page_icon="ðŸ“ˆ",
    layout="centered"
)

# ================== Ð¥Ð•Ð›ÐŸÐ•Ð Ð« ==================
def calc_signal(candles, trend, level_zone, vol, mode):
    """
    ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² Ð´Ð»Ñ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ.
    candles: ÑÐ¿Ð¸ÑÐ¾Ðº dict Ñ Ð¿Ð¾Ð»ÑÐ¼Ð¸ color, size
    trend: 'up', 'down', 'flat'
    level_zone: 'support', 'resistance', 'none'
    vol: 'low', 'normal', 'high'
    mode: 'safe', 'turbo', 'aggro', 'max'
    """

    bull = sum(1 for c in candles if c["color"] == "green")
    bear = sum(1 for c in candles if c["color"] == "red")
    doji = sum(1 for c in candles if c["color"] == "doji")

    score = 0

    # 1) ÐŸÑ€ÐµÐ¾Ð±Ð»Ð°Ð´Ð°Ð½Ð¸Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
    score += (bull - bear) * 7

    # 2) Ð Ð°Ð·Ð¼ÐµÑ€ ÑÐ²ÐµÑ‡ÐµÐ¹ â€“ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ñ‚ÐµÐ»Ð° ÑƒÑÐ¸Ð»Ð¸Ð²Ð°ÑŽÑ‚ ÑÐ¸Ð³Ð½Ð°Ð»
    big_bull = sum(
        1 for c in candles if c["color"] == "green" and c["size"] == "big"
    )
    big_bear = sum(
        1 for c in candles if c["color"] == "red" and c["size"] == "big"
    )
    score += (big_bull - big_bear) * 6

    # 3) Ð”Ð¾Ð´Ð¶Ð¸ = Ð½ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ð¾ÑÑ‚ÑŒ
    score -= doji * 4

    # 4) Ð¢Ñ€ÐµÐ½Ð´
    if trend == "up":
        score += 12
    elif trend == "down":
        score -= 12

    # 5) Ð Ð°Ð±Ð¾Ñ‚Ð° Ð¾Ñ‚ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¹
    if level_zone == "support":
        score += 10  # Ð²Ñ‹ÑˆÐµ ÑˆÐ°Ð½Ñ Ð¾Ñ‚ÑÐºÐ¾ÐºÐ° Ð²Ð²ÐµÑ€Ñ…
    elif level_zone == "resistance":
        score -= 10  # Ð²Ñ‹ÑˆÐµ ÑˆÐ°Ð½Ñ Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð¾Ñ‚Ð° Ð²Ð½Ð¸Ð·

    # 6) Ð’Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ
    if vol == "high":
        score -= 5  # ÑˆÑƒÐ¼Ð½Ð¾, ÑƒÑÐ¸Ð»Ð¸Ñ ÑÐ¸Ð³Ð½Ð°Ð»Ð° Ñ‡ÑƒÑ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ
    elif vol == "low":
        score += 3  # Ñ€Ñ‹Ð½Ð¾Ðº ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ñ‹Ð¹

    # 7) Ð ÐµÐ¶Ð¸Ð¼ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸
    mode_mult = {
        "safe": 0.8,   # 85% Ñ€ÐµÐ¶Ð¸Ð¼ (ÐºÐ¾Ð½ÑÐµÑ€Ð²Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹)
        "turbo": 1.0,  # 90% Ñ€ÐµÐ¶Ð¸Ð¼
        "aggro": 1.1,  # 95% Ñ€ÐµÐ¶Ð¸Ð¼ (Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹)
        "max": 1.2,    # 99% Ñ€ÐµÐ¶Ð¸Ð¼ (ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚)
    }[mode]

    score = score * mode_mult

    # ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ
    if score > 40:
        direction = "CALL (Ð’Ð’Ð•Ð Ð¥)"
    elif score < -40:
        direction = "PUT (Ð’ÐÐ˜Ð—)"
    else:
        direction = "ðŸš« ÐŸÑ€Ð¾Ð¿ÑƒÑÐº ÑÐ´ÐµÐ»ÐºÐ¸"

    # "ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ" Ð² Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…
    base_prob = 50 + abs(score)  # Ð¾Ñ‚ 50 Ð´Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ 100
    prob = max(50, min(99, base_prob))

    return direction, round(prob, 1), score


def calc_risk(balance, risk_percent):
    if balance <= 0:
        return 0
    return round(balance * risk_percent / 100, 2)


# ================== UI ==================
st.title("ðŸ¤– PO Signal Bot (Ð¾Ð±ÑƒÑ‡Ð°ÑŽÑ‰Ð¸Ð¹)")

st.caption(
    "ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð¿Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ñƒ ÑÐ²ÐµÑ‡ÐµÐ¹ Ð´Ð»Ñ Pocket Option. "
    "ÐÐµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð¹ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÐµÐ¹ Ð¸ Ð½Ðµ Ð´Ð°Ñ‘Ñ‚ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¹ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»Ð¸."
)

st.info(
    "â— Ð”Ð°Ð¶Ðµ ÑÐ°Ð¼Ñ‹Ð¹ Ð»ÑƒÑ‡ÑˆÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· **ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ Ð´Ð°Ñ‚ÑŒ 99% Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¸**. "
    "Ð ÐµÐ¶Ð¸Ð¼Ñ‹ 85/90/95/99% Ð·Ð´ÐµÑÑŒ â€” ÑÑ‚Ð¾ *ÑÑ‚Ð¸Ð»ÑŒ Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð°* (Ð±Ð¾Ð»ÐµÐµ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ñ‹Ð¹ Ð¸Ð»Ð¸ "
    "Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹), Ð° Ð½Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð°Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ.\n\n"
    "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð±Ð¾Ñ‚Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐºÐ°Ðº Ð¾Ð±ÑƒÑ‡Ð°ÑŽÑ‰Ð¸Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ + ÑÐ²Ð¾ÑŽ Ð³Ð¾Ð»Ð¾Ð²Ñƒ. ðŸ˜‰"
)

# ---------- Ð¡ÐÐ™Ð”Ð‘ÐÐ  ----------
st.sidebar.header("âš™ï¸ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ")

balance = st.sidebar.number_input(
    "Ð‘Ð°Ð»Ð°Ð½Ñ (USD)",
    min_value=0.0,
    value=100.0,
    step=10.0,
    format="%.2f"
)

risk_percent = st.sidebar.slider(
    "Ð Ð¸ÑÐº Ð½Ð° Ð¾Ð´Ð½Ñƒ ÑÐ´ÐµÐ»ÐºÑƒ, %",
    min_value=0,
    max_value=10,
    value=2,
    step=1,
)

mode_name = st.sidebar.selectbox(
    "Ð ÐµÐ¶Ð¸Ð¼ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸",
    [
        "ðŸ›¡ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ 85%",
        "âš¡ Ð¢ÑƒÑ€Ð±Ð¾ 90%",
        "ðŸ”¥ ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹ 95%",
        "ðŸ§ª ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 99% (ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚)",
    ]
)

mode_map = {
    "ðŸ›¡ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ 85%": "safe",
    "âš¡ Ð¢ÑƒÑ€Ð±Ð¾ 90%": "turbo",
    "ðŸ”¥ ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹ 95%": "aggro",
    "ðŸ§ª ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 99% (ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚)": "max",
}
mode = mode_map[mode_name]

deal_size = calc_risk(balance, risk_percent)
st.sidebar.metric("Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€ ÑÐ´ÐµÐ»ÐºÐ¸", f"{deal_size} $")

st.sidebar.markdown("---")
st.sidebar.write("ðŸ‘€ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° **Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ ÑÐ¸Ð»ÑŒÐ½Ñ‹Ñ…** "
                 "ÑÐ¸Ð³Ð½Ð°Ð»Ð°Ñ… Ð¸ Ð½Ð° **Ð¼Ð¸Ð½. Ñ€Ð¸ÑÐº**.")

# ---------- Ð’Ð’ÐžÐ” Ð¡Ð’Ð•Ð§Ð•Ð™ ----------
st.subheader("1ï¸âƒ£ Ð’Ð²ÐµÐ´Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¼ ÑÐ²ÐµÑ‡Ð°Ð¼")

st.write(
    "Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸, ÐºÐ°Ðº Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÐ»Ð¸ **Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 5 ÑÐ²ÐµÑ‡ÐµÐ¹** Ð½Ð° Pocket Option "
    "(Ñ‚Ð°Ð¹Ð¼Ñ„Ñ€ÐµÐ¹Ð¼, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, M1/M5)."
)

num_candles = 5

colors_dict = {
    "Ð—ÐµÐ»Ñ‘Ð½Ð°Ñ (Ð±Ñ‹Ñ‡ÑŒÑ)": "green",
    "ÐšÑ€Ð°ÑÐ½Ð°Ñ (Ð¼ÐµÐ´Ð²ÐµÐ¶ÑŒÑ)": "red",
    "Ð”Ð¾Ð´Ð¶Ð¸ / Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ð±ÐµÐ· Ñ‚ÐµÐ»Ð°": "doji",
}

sizes_dict = {
    "Ð‘Ð¾Ð»ÑŒÑˆÐ°Ñ": "big",
    "Ð¡Ñ€ÐµÐ´Ð½ÑÑ": "mid",
    "ÐœÐ°Ð»ÐµÐ½ÑŒÐºÐ°Ñ": "small",
}

rows = []
for i in range(num_candles):
    cols = st.columns(3)
    with cols[0]:
        st.markdown(f"**Ð¡Ð²ÐµÑ‡Ð° {i+1} (ÑÐ°Ð¼Ð°Ñ ÑÑ‚Ð°Ñ€Ð°Ñ)**")
    with cols[1]:
        color_label = st.selectbox(
            f"Ð¦Ð²ÐµÑ‚ {i+1}",
            list(colors_dict.keys()),
            key=f"color_{i}",
        )
    with cols[2]:
        size_label = st.selectbox(
            f"Ð Ð°Ð·Ð¼ÐµÑ€ {i+1}",
            list(sizes_dict.keys()),
            key=f"size_{i}",
        )

    rows.append(
        {
            "â„–": i + 1,
            "color_label": color_label,
            "size_label": size_label,
            "color": colors_dict[color_label],
            "size": sizes_dict[size_label],
        }
    )

df = pd.DataFrame(
    [
        {
            "Ð¡Ð²ÐµÑ‡Ð°": r["â„–"],
            "Ð¦Ð²ÐµÑ‚": r["color_label"],
            "Ð Ð°Ð·Ð¼ÐµÑ€": r["size_label"],
        }
        for r in rows
    ]
)

with st.expander("Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð²Ð²ÐµÐ´Ñ‘Ð½Ð½Ñ‹Ñ… ÑÐ²ÐµÑ‡ÐµÐ¹"):
    st.dataframe(df, hide_index=True, use_container_width=True)

# ---------- Ð¢Ð Ð•ÐÐ”, Ð£Ð ÐžÐ’ÐÐ˜, Ð’ÐžÐ›Ð ----------
st.subheader("2ï¸âƒ£ Ð¢Ñ€ÐµÐ½Ð´, ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ, Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ")

col1, col2, col3 = st.columns(3)

with col1:
    trend_label = st.radio(
        "Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚Ñ€ÐµÐ½Ð´",
        ["Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð²ÐµÑ€Ñ…", "Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð½Ð¸Ð·", "Ð¤Ð»ÑÑ‚ / Ð½ÐµÐ¿Ð¾Ð½ÑÑ‚Ð½Ð¾"],
        index=2,
    )

trend_map = {
    "Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð²ÐµÑ€Ñ…": "up",
    "Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð½Ð¸Ð·": "down",
    "Ð¤Ð»ÑÑ‚ / Ð½ÐµÐ¿Ð¾Ð½ÑÑ‚Ð½Ð¾": "flat",
}
trend = trend_map[trend_label]

with col2:
    level_label = st.radio(
        "Ð¦ÐµÐ½Ð° Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¹",
        ["Ð’Ð¾Ð·Ð»Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ (Ð½Ð¸Ð·ÐºÐ¾)", "Ð’Ð¾Ð·Ð»Ðµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ (Ð²Ñ‹ÑÐ¾ÐºÐ¾)", "ÐÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ"],
        index=2,
    )

level_map = {
    "Ð’Ð¾Ð·Ð»Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ (Ð½Ð¸Ð·ÐºÐ¾)": "support",
    "Ð’Ð¾Ð·Ð»Ðµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ (Ð²Ñ‹ÑÐ¾ÐºÐ¾)": "resistance",
    "ÐÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ": "none",
}
level_zone = level_map[level_label]

with col3:
    vol_label = st.radio(
        "Ð’Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",
        ["ÐÐ¸Ð·ÐºÐ°Ñ", "ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ", "Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ/Ð½ÐµÑ€Ð²Ð½Ð°Ñ"],
        index=1,
    )

vol_map = {
    "ÐÐ¸Ð·ÐºÐ°Ñ": "low",
    "ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ": "normal",
    "Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ/Ð½ÐµÑ€Ð²Ð½Ð°Ñ": "high",
}
vol = vol_map[vol_label]

# ---------- Ð ÐÐ¡Ð§ÐÐ¢ Ð¡Ð˜Ð“ÐÐÐ›Ð ----------
st.subheader("3ï¸âƒ£ Ð¡Ð¸Ð³Ð½Ð°Ð» Ð±Ð¾Ñ‚Ð°")

if st.button("ðŸ” ÐŸÑ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽ"):
    candles_for_logic = [
        {"color": r["color"], "size": r["size"]} for r in rows
    ]

    direction, prob, raw_score = calc_signal(
        candles_for_logic,
        trend,
        level_zone,
        vol,
        mode,
    )

    st.markdown("### ðŸ§  Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°:")

    if "ÐŸÑ€Ð¾Ð¿ÑƒÑÐº" in direction:
        st.warning(
            f"Ð¡Ð¸Ð³Ð½Ð°Ð»: **{direction}**\n\n"
            f"Ð Ð°ÑÑ‡Ñ‘Ñ‚Ð½Ð°Ñ ÑÐ¸Ð»Ð° ÑÐ¸Ð³Ð½Ð°Ð»Ð°: **{prob}%**.\n\n"
            "Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð½Ðµ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÐ¸Ð»ÑŒÐ½Ñ‹Ðµ. Ð›ÑƒÑ‡ÑˆÐµÐµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ â€” **Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐ´ÐµÐ»ÐºÑƒ**."
        )
    else:
        st.success(
            f"Ð¡Ð¸Ð³Ð½Ð°Ð»: **{direction}**\n\n"
            f"Ð Ð°ÑÑ‡Ñ‘Ñ‚Ð½Ð°Ñ ÑÐ¸Ð»Ð° ÑÐ¸Ð³Ð½Ð°Ð»Ð°: **~{prob}%** "
            f"(Ñ€ÐµÐ¶Ð¸Ð¼: **{mode_name}**).\n\n"
            f"Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ð¹ Ñ€Ð¸ÑÐº Ð½Ð° ÑÐ´ÐµÐ»ÐºÑƒ: **{deal_size} $**."
        )

    with st.expander("ðŸ“Š ÐŸÐ¾ÑÑÐ½ÐµÐ½Ð¸Ðµ Ð»Ð¾Ð³Ð¸ÐºÐ¸ (Ð´Ð»Ñ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ)"):
        st.write(
            "- Ð‘Ð¾Ñ‚ ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚ Ð½Ð° ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð·ÐµÐ»Ñ‘Ð½Ñ‹Ñ…/ÐºÑ€Ð°ÑÐ½Ñ‹Ñ… ÑÐ²ÐµÑ‡ÐµÐ¹, Ð¸Ñ… Ñ€Ð°Ð·Ð¼ÐµÑ€.\n"
            "- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ñ‚Ñ€ÐµÐ½Ð´ (Ð²Ð²ÐµÑ€Ñ…/Ð²Ð½Ð¸Ð·/Ñ„Ð»ÑÑ‚).\n"
            "- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, Ð²Ð¾Ð·Ð»Ðµ ÐºÐ°ÐºÐ¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ ÑÐµÐ¹Ñ‡Ð°Ñ Ñ†ÐµÐ½Ð° (Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°/ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ).\n"
            "- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ (ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ñ‹Ð¹ Ð¸Ð»Ð¸ Ð½ÐµÑ€Ð²Ð½Ñ‹Ð¹ Ñ€Ñ‹Ð½Ð¾Ðº).\n"
            "- Ð ÐµÐ¶Ð¸Ð¼ 85/90/95/99% Ð¼ÐµÐ½ÑÐµÑ‚ *Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾ÑÑ‚ÑŒ* Ð²Ñ…Ð¾Ð´Ð°.\n\n"
            f"Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Â«ÑÐºÐ¾Ñ€Ð¸Ð½Ð³Â» ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸: **{raw_score:.1f}** Ð¾Ñ‡ÐºÐ¾Ð².\n"
            "Ð§ÐµÐ¼ Ð¾Ð½ Ð²Ñ‹ÑˆÐµ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ, Ñ‚ÐµÐ¼ Ñ‚ÐµÐ¼Ð° ÑÐ¸Ð»ÑŒÐ½ÐµÐµ.\n"
        )

else:
    st.info("ÐÐ°Ð¶Ð¼Ð¸ ÐºÐ½Ð¾Ð¿ÐºÑƒ **Â«ÐŸÑ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽÂ»**, ÐºÐ¾Ð³Ð´Ð° Ð²Ð²ÐµÐ´Ñ‘ÑˆÑŒ Ð²ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ.")

# ---------- Ð¤Ð£Ð¢Ð•Ð  ----------
st.markdown("---")
st.caption(
    f"ÐžÐ±ÑƒÑ‡Ð°ÑŽÑ‰Ð¸Ð¹ PO-Ð±Ð¾Ñ‚ Â· {datetime.now().year} Â· ÐÐ²Ñ‚Ð¾Ñ€: Umar + ChatGPT ðŸ¤\n\n"
    "Ð¢Ð¾Ñ€Ð³ÑƒÐ¹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐ¼Ð¸ Ð´ÐµÐ½ÑŒÐ³Ð°Ð¼Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ **Ð½Ðµ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ**. "
    "Ð›ÑƒÑ‡ÑˆÐ¸Ð¹ Ð´ÐµÐ¿Ð¾Ð·Ð¸Ñ‚ â€” Ð·Ð½Ð°Ð½Ð¸Ñ Ð¸ Ñ€Ð¸ÑÐº-Ð¼ÐµÐ½ÐµÐ´Ð¶Ð¼ÐµÐ½Ñ‚."
    )
